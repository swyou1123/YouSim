import * as fs from 'fs';
import * as path from 'path';

/**
 * Inject templated code into the beginning of a module.
 */
function prefixLoader( userCode) {
  // We know one or the other will be defined, depending on the version of webpack being used
  const { distDir } = 'getOptions' in this ? this.getOptions() : this.query;

  var templatePath = path.resolve(__dirname, '../templates/prefixLoaderTemplate.js');
  // make sure the template is included when runing `webpack watch`
  this.addDependency(templatePath);

  // Fill in the placeholder
  let templateCode = fs.readFileSync(templatePath).toString();
  templateCode = templateCode.replace('__DIST_DIR__', distDir);

  return `${templateCode}\n${userCode}`;
}

export { prefixLoader as default };
//# sourceMappingURL=prefixLoader.js.map
